# Objective

This is a repository to implement codes introduced in the following book:'[「Python実践機械学習システム100本ノック」](https://www.shuwasystem.co.jp/book/9784798063416.html)'.
Original download file is [here](https://www.shuwasystem.co.jp/support/7980html/6341.html).

## Objective Phases

Learn from examples to implement variety of minimal viable products in the streams of advanced analytics.
1. **First Stage**
   1. Finish Part 1 by End of Goldenweek Holidays (**2022/05/08**)
   2. Finish Part 2 (TBD : By Early June for now)

2. **Second Stage**
   1. Come up with quick-win strategies + implementation that can be done in current working environment.
   2. Adapt the learning from the book to real business, especially in my current working environment to speed up and automate redundant processes that sucks up important resources of the company.

## Potential Output after Finishing 2 Phases

1. Automation of redundant processes. (Reading dirty)
2. Applying simple but robust ML model on frequent refreshed datasets.
3. Building dashboard using python to rack core KPI
4. Build docker container to run jobs sustainably.
5. advanced analytics Although the aim is to trace over the courses, I will work on the following things.
6. Make codes more efficient.
7. Optimize the running time of codes.
8. Turn redundant codes into functions.
9. Use classes if necessary.


# Table of Contents from the Book

　本書の効果的な使い方

## 第１部 データ分析システム
### 第1章 分析に向けた準備を行う10本ノック (Aim : 2022/04/17)
- ノック1：データを全て読み込んでみよう
- ノック2：データを結合（ユニオン）してみよう
- ノック3：フォルダ内のファイル名を一覧化してみよう
- ノック4：複数データを結合（ユニオン）してみよう
- ノック5：データの統計量を確認しよう
- ノック6：不要なデータを除外しよう
- ノック7：マスタデータを結合（ジョイン）してみよう
- ノック8：マスタが存在しないコードに名称を設定しよう
- ノック9：分析基礎テーブルを出力してみよう
- ノック10：セルを整理して使いやすくしよう
### 第2章 データを可視化し分析を行う10本ノック (Aim : 2022/04/24)
- ノック11：データを読み込んで不要なものを除外しよう
- ノック12：データの全体像を把握しよう
- ノック13：月別の売上を集計してみよう
- ノック14：月別の推移を可視化してみよう
- ノック15：売上からヒストグラムを作成してみよう
- ノック16：都道府県別の売上を集計して可視化しよう
- ノック17：クラスタリングに向けてデータを加工しよう
- ノック18：クラスタリングで店舗をグループ化してみよう
- ノック19：グループの傾向を分析してみよう
- ノック20：クラスタリングの結果をt-SNEで可視化しよう
### 第3章 可視化の仕組みを構築する10本ノック (Aim : 2022/05/01)
- ノック21：店舗を絞り込んで可視化できるようにしてみよう
- ノック22：複数店舗の詳細を可視化できるようにしてみよう
- ノック23：スライドバーを用いてオーダー件数を調べてみよう
- ノック24：トグルボタンで地域データを抽出しよう
- ノック25：日付を指定してデータを抽出してみよう
- ノック26：ストーリーを考えてデータを構築しよう
- ノック27：キャンセルの理由を分析してみよう
- ノック28：仮説を検証してみよう
- ノック29：ストーリーをもとにパーツやデータを組み合わせてダッシュボードを作ろう
- ノック30：ダッシュボードを改善しよう
### 第4章 レポーティングする仕組みを構築する10本ノック (Aim : 2022/05/08)
- ノック31：特定店舗の売上をExcelにして出力してみよう
- ノック32：Excelの表を整えて出力してみよう
- ノック33：売上以外のデータも出力してみよう
- ノック34：問題のある箇所を赤字で出力してみよう
- ノック35：エクセルのセル関数で日毎の集計をしてみよう
- ノック36：折れ線グラフにして出力してみよう
- ノック37：レポートに向けてデータを準備しよう
- ノック38：データシートに必要なデータを出力しよう
- ノック39：サマリーシートを作成しよう
- ノック40：店舗別にレポートをExcel出力してみよう
### 第5章 分析システムを構築する10本ノック (Aim : 2022/05/08)
- ノック41：基本的なフォルダを生成しよう
- ノック42：入力データのチェック機構を作ろう
- ノック43：レポーティング（本部向け）を関数化してみよう
- ノック44：レポーティング（店舗向け）を関数化してみよう
- ノック45：関数を実行し動作を確認してみよう
- ノック46：更新に対応できる出力フォルダを作成しよう
- ノック47：都道府県別で出力できるように出力フォルダを拡張してデータを出力しよう
- ノック48：前月のデータを動的に読み込もう
- ノック49：実行して過去データとの比較をしてみよう
- ノック50：画面から実行できるようにしよう

## 第2部 機械学習システム
### 第6章 機械学習のためのデータ加工をする10本ノック
- ノック51：データ加工の下準備をしよう
- ノック52：データの読み込みを行い加工の方向性を検討しよう
- ノック53：1か月分のデータの基本的なデータ加工を実施しよう
- ノック54：機械学習に使用する変数を作成しよう
- ノック55：店舗単位に集計して変数を作成しよう
- ノック56：データの加工と店舗別集計を関数で実行しよう
- ノック57：全データの読み込みとデータ加工をやってみよう
- ノック58：目的変数を作成しよう
- ノック59：説明変数と目的変数を紐づけて機械学習用のデータを仕上げよう
- ノック60：機械学習用データの確認を行い出力しよう
### 第7章 機械学習モデルを構築する10本ノック
- ノック61：フォルダ生成をして機械学習用データを読み込もう
- ノック62：カテゴリカル変数の対応をしよう
- ノック63：学習データとテストデータを分割しよう
- ノック64：1つのモデルを構築しよう
- ノック65：評価を実施してみよう
- ノック66：モデルの重要度を確認してみよう
- ノック67：モデル構築から評価までを関数化しよう
- ノック68：モデルファイルや評価結果を出力しよう
- ノック69：アルゴリズムを拡張して多角的な評価を実施しよう
- ノック70：平日/休日モデルを一度で回せるようにしよう
### 第8章 構築した機械学習モデルで新規データを予測する10本ノック
- ノック71：フォルダ生成をしてデータ読み込みの準備をしよう
- ノック72：予測したい新規データを読み込もう
- ノック73：新規データを店舗別で集計しよう
- ノック74：新規データのカテゴリカル変数対応をしよう
- ノック75：モデルに投入する直前の形式に整えよう
- ノック76：モデルファイルを読み込んでみよう
- ノック77：新規データの予測をしてみよう
- ノック78：予測結果のヒートマップを作成してみよう
- ノック79：実績データを作成しよう
- ノック80：現場に向けたレポートを作成し出力しよう
### 第9章 小規模機械学習システムを作成する10本ノック
- ノック81：フォルダ生成をして初期の変数定義をしよう
- ノック82：更新データを読み込んで店舗別データを作成しよう
- ノック83：月次店舗データの更新をしよう
- ノック84：機械学習用データの作成と更新をしよう
- ノック85：機械学習モデル用の事前データ加工をしよう
- ノック86：機械学習モデルの構築・評価をしよう
- ノック87：新規データ予測に向けた下準備をしよう
- ノック88：新規データの予測をしよう
- ノック89：現場向けレポートを作成し出力しよう
- ノック90：機械学習モデルの精度推移を可視化しよう
### 第10章 機械学習システムのダッシュボードを作成する10本ノック
- ノック91：単一データの読み込みをしよう
- ノック92：更新データを読み込んで店舗別データを作成しよう
- ノック93：機械学習モデルの重要変数データを読み込んで結合しよう
- ノック94：機械学習モデルの予測結果を読み込んで結合しよう
- ノック95：機械学習モデル用の事前データ加工をしよう
- ノック96：店舗分析用ダッシュボードを作成しよう
- ノック97：機械学習モデルの精度評価ダッシュボードを作成しよう
- ノック98：機械学習モデルの混同行列ダッシュボードを作成しよう
- ノック99：機械学習モデルの変数重要度の分析ダッシュボードを作成しよう
- ノック100：機械学習モデルの予測結果検証のための可視化をしよう
# Citation from Preface

分析結果や技術が理解されない状況に直面する。
残念ながら、それは殆どの現場で起きてしまう。
現場に理解されるためには、技術だけでは不十分で、運用を意識し、小さな成果を継続的に生み出すための最小限の仕組み化が必要です。
最小限の仕組みでも、小さな成果を上げ続けていくことで、少しずつ見方を増やし、文化の醸成に繋がっていきます。
# Intro of the book

あなたの分析結果や技術は、社内で十分に理解されていますか？ もし理解されていないのなら、小規模でも継続的にデータ分析や機械学習を回す「仕組み」が必要です。本書は、大好評の『Python実践データ分析100本ノック』の続編として、実際のビジネス現場を想定した100の例題を解くことで、現場の視点と応用力が身に付くよう設計した問題集です。データ活用プロジェクトを立ち上げ、社内にきっちり定着化させるための最初の一歩です！

# Remarks from the Author

この度は、「Python実践機械学習システム100本ノック」を手にとっていただきありがとうございます。

# About files

ダウンロードファイルには、
本章とDockerファイルの二つが含まれています。

【本章】
本章には、章ごとにフォルダが準備されています。
それぞれのフォルダには、
- ①ソースコードであるJupyter Notebookファイル(.ipynb)と
- ②サンプルデータファイル
が含まれています。

# About ①

①のJupyter Notebookファイルは、各章ごとに2種類存在し、１つは問題であるノックのみのファイル、もう１つはノックに加えて解答であるサンプルコードも記載されているファイルとなります。
＊解答を含むファイルはファイル名に _answer が付いています。

<br>

# About ②
②のサンプルデータは、1～4章まではそのまま利用できる形になっていますが、
5章以降は、使用データから適宜配置し利用してください。

# 【About Google Colaboratory】
Google Colaboratoryを利用する場合は、
本章フォルダをGoogleDriveにアップロードして使用します。
その際に、マイドライブ直下に「MLSys_100Knocks」等の作業フォルダを作成することをお勧めします。
アップロードが完了したら、各章のJupyter Notebookファイルを右クリックし、
「アプリで開く」から「Google Colaboratory」を選択してください。
ファイルが開いたら、上部のコメントアウトされている部分を有効にし、実行してください。
なお、ライブラリのバージョンは、Google Colaboratoryに準拠する形を取っています。

※重要
Google Colaboratoryでの動作も確認はしていますが、
本書に掲載した結果等は、WindowsPCのJupyter Notebookで実行したものとなります。
他の動作環境(MacやGoogle Colaboratory)を用いると、結果が異なる可能性があるのでご留意ください。

現在では、6章のデータ読み込みの際に、
globでのファイル取得の順番が異なることから、
機械学習の結果が若干、本書と変わってくることが確認されています。
もし気になる方は、ノック51に「tbl_order_paths = sorted(tbl_order_paths)」を追加してください。


# 【About Docker Environment】
Docker環境を利用する場合は、
お使いのパソコンに「Docker」と「Docker-Compose」が必要となります。

※重要
すでにDocker（及びDocker-Compose）を利用している方を対象としておりますので、
Dockerの環境構築についてのお問い合わせはご容赦願います。
（上記内容が不明な場合や、うまく構築出来ない場合は、上記Jupyter NotebookかGoogle Colaboratoryをご利用下さい）

## How to Setup Docker Environment
1. ダウンロードしたサンプルソースを任意のフォルダに展開して下さい。
2. Terminal /　Windows Powershell等を起動し、カレントディレクトリをdocker-compose.yamlがあるフォルダに変更して下さい。
3. 「docker-compose build」を行い、ビルドを実行してください。
   1. 注意： 初回ビルドはある程度時間が掛かります。エラーで失敗する可能性がありますが、--no-cache等を試して下さい。
4. ビルドが完了したら「docker-compose up -d」を行い、コンテナを起動してください。
   1. 注意：他のプログラムやコンテナでポート3333を利用している場合は、.envファイルの「JUPYTER_NB_PORT=3333」を任意のポート番号に変更して起動しなおして下さい。
5. 「./jupyter_notebook/codes」フォルダの中に、【本章】のソース・データ一式をコピーして配置して下さい。
   1. codes
      |- 1章
      |- ・・・
      |- 10章　　　　

6. ブラウザにて「localhost:3333」にアクセスして、Notebook画面が表示されれば準備は完了です。

# Closing
本書のコードよりもエレガントなコードを常に模索していきましょう！

100本ノック、是非、楽しんでください！